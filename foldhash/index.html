<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This crate provides foldhash, a fast, non-cryptographic, minimally DoS-resistant hashing algorithm designed for computational uses such as hashmaps, bloom filters, count sketching, etc."><title>foldhash - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-492a78a4a87dcc01.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="foldhash" data-themes="" data-resource-suffix="" data-rustdoc-version="1.82.0 (f6e511eec 2024-10-15)" data-channel="1.82.0" data-search-js="search-a99f1315e7cc5121.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-921df33f47b8780c.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-3b12f09e550e0385.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../foldhash/index.html">foldhash</a><span class="version">0.1.3</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Aliases</a></li></ul></section></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">foldhash</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/foldhash/lib.rs.html#1-397">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This crate provides foldhash, a fast, non-cryptographic, minimally
DoS-resistant hashing algorithm designed for computational uses such as
hashmaps, bloom filters, count sketching, etc.</p>
<p>When should you <strong>not</strong> use foldhash:</p>
<ul>
<li>
<p>You are afraid of people studying your long-running programâ€™s behavior
to reverse engineer its internal random state and using this knowledge to
create many colliding inputs for computational complexity attacks.</p>
</li>
<li>
<p>You expect foldhash to have a consistent output across versions or
platforms, such as for persistent file formats or communication protocols.</p>
</li>
<li>
<p>You are relying on foldhashâ€™s properties for any kind of security.
Foldhash is <strong>not appropriate for any cryptographic purpose</strong>.</p>
</li>
</ul>
<p>Foldhash has two variants, one optimized for speed which is ideal for data
structures such as hash maps and bloom filters, and one optimized for
statistical quality which is ideal for algorithms such as
<a href="https://en.wikipedia.org/wiki/HyperLogLog">HyperLogLog</a> and
<a href="https://en.wikipedia.org/wiki/MinHash">MinHash</a>.</p>
<p>Foldhash can be used in a <code>#![no_std]</code> environment by disabling its default
<code>"std"</code> feature.</p>
<h2 id="usage"><a class="doc-anchor" href="#usage">Â§</a>Usage</h2>
<p>The easiest way to use this crate with the standard library <a href="convenience/type.HashMap.html" title="type foldhash::convenience::HashMap"><code>HashMap</code></a> or
<a href="convenience/type.HashSet.html" title="type foldhash::convenience::HashSet"><code>HashSet</code></a> is to import them from <code>foldhash</code> instead, along with the
extension traits to make <a href="https://doc.rust-lang.org/1.82.0/std/collections/hash/map/struct.HashMap.html#method.new" title="associated function std::collections::hash::map::HashMap::new"><code>HashMap::new</code></a> and <a href="https://doc.rust-lang.org/1.82.0/std/collections/hash/map/struct.HashMap.html#method.with_capacity" title="associated function std::collections::hash::map::HashMap::with_capacity"><code>HashMap::with_capacity</code></a>
work out-of-the-box:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>foldhash::{HashMap, HashMapExt};

<span class="kw">let </span><span class="kw-2">mut </span>hm = HashMap::new();
hm.insert(<span class="number">42</span>, <span class="string">"hello"</span>);</code></pre></div>
<p>You can also avoid the convenience types and do it manually by initializing
a <a href="seed/fast/struct.RandomState.html" title="struct foldhash::seed::fast::RandomState"><code>RandomState</code></a>, for example if you are using a different hash map
implementation like <a href="https://docs.rs/hashbrown/"><code>hashbrown</code></a>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>hashbrown::HashMap;
<span class="kw">use </span>foldhash::fast::RandomState;

<span class="kw">let </span><span class="kw-2">mut </span>hm = HashMap::with_hasher(RandomState::default());
hm.insert(<span class="string">"foo"</span>, <span class="string">"bar"</span>);</code></pre></div>
<p>The above methods are the recommended way to use foldhash, which will
automatically generate a randomly generated hasher instance for you. If you
absolutely must have determinism you can use <a href="seed/fast/struct.FixedState.html" title="struct foldhash::seed::fast::FixedState"><code>FixedState</code></a>
instead, but note that this makes you trivially vulnerable to HashDoS
attacks and might lead to quadratic runtime when moving data from one
hashmap/set into another:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::collections::HashSet;
<span class="kw">use </span>foldhash::fast::FixedState;

<span class="kw">let </span><span class="kw-2">mut </span>hm = HashSet::with_hasher(FixedState::with_seed(<span class="number">42</span>));
hm.insert([<span class="number">1</span>, <span class="number">10</span>, <span class="number">100</span>]);</code></pre></div>
<p>If you rely on statistical properties of the hash for the correctness of
your algorithm, such as in <a href="https://en.wikipedia.org/wiki/HyperLogLog">HyperLogLog</a>,
it is suggested to use the <a href="seed/quality/struct.RandomState.html" title="struct foldhash::seed::quality::RandomState"><code>RandomState</code></a>
or <a href="seed/quality/struct.FixedState.html" title="struct foldhash::seed::quality::FixedState"><code>FixedState</code></a> from the <a href="quality/index.html" title="mod foldhash::quality"><code>quality</code></a> module instead
of the <a href="fast/index.html" title="mod foldhash::fast"><code>fast</code></a> module. The latter is optimized purely for speed in hash
tables and has known statistical imperfections.</p>
<p>Finally, you can also directly use the <a href="seed/quality/struct.RandomState.html" title="struct foldhash::seed::quality::RandomState"><code>RandomState</code></a>
or <a href="seed/quality/struct.FixedState.html" title="struct foldhash::seed::quality::FixedState"><code>FixedState</code></a> to manually hash items using the
<a href="https://doc.rust-lang.org/1.82.0/core/hash/trait.BuildHasher.html" title="trait core::hash::BuildHasher"><code>BuildHasher</code></a> trait:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::hash::BuildHasher;
<span class="kw">use </span>foldhash::quality::RandomState;

<span class="kw">let </span>random_state = RandomState::default();
<span class="kw">let </span>hash = random_state.hash_one(<span class="string">"hello world"</span>);</code></pre></div>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="convenience/index.html" title="mod foldhash::convenience">convenience</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="mod" href="fast/index.html" title="mod foldhash::fast">fast</a></div><div class="desc docblock-short">The foldhash implementation optimized for speed.</div></li><li><div class="item-name"><a class="mod" href="quality/index.html" title="mod foldhash::quality">quality</a></div><div class="desc docblock-short">The foldhash implementation optimized for quality.</div></li><li><div class="item-name"><a class="mod" href="seed/index.html" title="mod foldhash::seed">seed</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.ARBITRARY0.html" title="constant foldhash::ARBITRARY0">ARBITRAR<wbr>Y0</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="constant" href="constant.ARBITRARY1.html" title="constant foldhash::ARBITRARY1">ARBITRAR<wbr>Y1</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="constant" href="constant.ARBITRARY2.html" title="constant foldhash::ARBITRARY2">ARBITRAR<wbr>Y2</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="constant" href="constant.ARBITRARY3.html" title="constant foldhash::ARBITRARY3">ARBITRAR<wbr>Y3</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="constant" href="constant.ARBITRARY4.html" title="constant foldhash::ARBITRARY4">ARBITRAR<wbr>Y4</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="constant" href="constant.ARBITRARY5.html" title="constant foldhash::ARBITRARY5">ARBITRAR<wbr>Y5</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="constant" href="constant.ARBITRARY6.html" title="constant foldhash::ARBITRARY6">ARBITRAR<wbr>Y6</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="constant" href="constant.ARBITRARY7.html" title="constant foldhash::ARBITRARY7">ARBITRAR<wbr>Y7</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="constant" href="constant.ARBITRARY8.html" title="constant foldhash::ARBITRARY8">ARBITRAR<wbr>Y8</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="constant" href="constant.ARBITRARY9.html" title="constant foldhash::ARBITRARY9">ARBITRAR<wbr>Y9</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.HashMapExt.html" title="trait foldhash::HashMapExt">Hash<wbr>MapExt</a></div><div class="desc docblock-short">A convenience extension trait to enable <a href="https://doc.rust-lang.org/1.82.0/std/collections/hash/map/struct.HashMap.html#method.new" title="associated function std::collections::hash::map::HashMap::new"><code>HashMap::new</code></a> for hash maps that use <code>foldhash</code>.</div></li><li><div class="item-name"><a class="trait" href="trait.HashSetExt.html" title="trait foldhash::HashSetExt">Hash<wbr>SetExt</a></div><div class="desc docblock-short">A convenience extension trait to enable <a href="https://doc.rust-lang.org/1.82.0/std/collections/hash/set/struct.HashSet.html#method.new" title="associated function std::collections::hash::set::HashSet::new"><code>HashSet::new</code></a> for hash sets that use <code>foldhash</code>.</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.folded_multiply.html" title="fn foldhash::folded_multiply">folded_<wbr>multiply</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="fn" href="fn.hash_bytes_long.html" title="fn foldhash::hash_bytes_long">hash_<wbr>bytes_<wbr>long</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Hashes strings &gt;= 16 bytes, has unspecified behavior when bytes.len() &lt; 16.</div></li><li><div class="item-name"><a class="fn" href="fn.hash_bytes_medium.html" title="fn foldhash::hash_bytes_medium">hash_<wbr>bytes_<wbr>medium</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Hashes strings &gt;= 16 bytes, has unspecified behavior when bytes.len() &lt; 16.</div></li></ul><h2 id="types" class="section-header">Type Aliases<a href="#types" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.HashMap.html" title="type foldhash::HashMap">HashMap</a></div><div class="desc docblock-short">Type alias for <a href="https://doc.rust-lang.org/1.82.0/std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap"><code>std::collections::HashMap&lt;K, V, foldhash::fast::RandomState&gt;</code></a>.</div></li><li><div class="item-name"><a class="type" href="type.HashSet.html" title="type foldhash::HashSet">HashSet</a></div><div class="desc docblock-short">Type alias for <a href="https://doc.rust-lang.org/1.82.0/std/collections/hash/set/struct.HashSet.html" title="struct std::collections::hash::set::HashSet"><code>std::collections::HashSet&lt;T, foldhash::fast::RandomState&gt;</code></a>.</div></li></ul></section></div></main></body></html>